<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
	  <link rel="stylesheet" href="admin.css"></link>

    <h:head>
        <title>Página del admin</title>
    </h:head>

    <h:body>
		<section class="inicio" id="inicio">
			<div class="content">
				<header>
					<a href="#" class="logo"><span>G</span>ualet</a>
					<input type="checkbox" id="menu-bar"></input>
					<label for="menu-bar" class="fa fa-bars"></label>

					<nav class="navbar">
					<h:form>	
						<a href="login.xhtml">Inicio</a>
						<a href="admin.xhtml">Ajustes</a>
						<h:commandLink action="#{infoSesion.invalidarSesion()}">Cerrar Sesion</h:commandLink>
					</h:form>
					</nav>

				</header>

				<h3>AREA DE
					<span>ADMINISTRADORES</span>
				</h3>
				
				<c:choose>
					
					<c:when test="#{infoSesion.usuario.esAdministrativo}">
						
					<p>Buenas tardes <i><h:outputText value="#{infoSesion.usuario.nombre}"/></i>, ¿qué acción realizará?</p>

					<div>
						
						<h2>Administrar clientes</h2>

						<button onclick="mostrar('Alta')">Alta Cliente</button>

						<button onclick="mostrar('Mod')">Modificar Cliente</button>

						<button onclick="mostrar('Baja')">Baja Cliente</button>

						<div class="Alta" style="display:none" >

							<h:form id="fAlta">

								<p>Indique el cliente que busca dar de alta:</p>

								<h:panelGrid columns="3"> 
									<h:outputText value="Identificador del cliente: " styleClass="info-campo"/>
									<h:inputText id="identAlta" required="true" requiredMessage="Valor obligatorio" value="#{admin.ident}"/>
									<h:message for="identAlta" styleClass="info-campo"/>
								</h:panelGrid>
									
								<div style="display: inline">
									<h:commandButton styleClass="button" id="darAlta" value="Dar de Alta" action="#{admin.darAlta()}"/>
									<button onclick="cerrar('Alta');return false">Cancelar</button>
								</div>

							</h:form>
						</div>	

						<div class="Mod" style="display:none">

							<h:form id="fMod">

								<p>Indique el cliente que busca modificar y los datos:</p>
								<h:panelGrid columns="3"> 
									<h:outputText value="Identificador del cliente: " styleClass="info-campo"/>
									<h:inputText id="identMod" required="true" requiredMessage="Valor obligatorio" value="#{admin.ident}"/>
									<h:message for="identMod" styleClass="info-campo"/>

									<h:outputText value="Nuevo pais: " styleClass="info-campo"/>
									<h:inputText id="pais1Mod" value="#{admin.pais1}"/>
									<h:message for="pais1Mod" styleClass="info-campo"/>

									<h:outputText value="Nueva fecha de baja: " styleClass="info-campo"/>
									<h:inputText id="fecha1Mod" value="#{admin.fecha1}"/>
									<h:message for="fecha1Mod" styleClass="info-campo"/>

									<h:outputText value="Nueva ciudad: " styleClass="info-campo"/>
									<h:inputText id="ciudad1Mod" value="#{admin.ciudad1}"/>
									<h:message for="ciudad1Mod" styleClass="info-campo"/>

									<h:outputText value="Nueva direccion: " styleClass="info-campo"/>
									<h:inputText id="dir1Mod" value="#{admin.dir1}"/>
									<h:message for="dir1Mod" styleClass="info-campo"/>

									<h:outputText value="Nuevo codigo postal: " styleClass="info-campo"/>
									<h:inputText id="cp1Mod" value="#{admin.cp1}"/>
									<h:message for="cp1Mod" styleClass="info-campo"/>
								</h:panelGrid>
								<div style="display: inline">
									<h:commandButton styleClass="button" id="modificar" value="Modificar" action="#{admin.darBaja()}"/>
									<button onclick="cerrar('Mod');return false">Cancelar</button>
								</div>

							</h:form>
						</div>

						<div class="Baja" style="display:none">

							<h:form id="fBaja">

								<p>Indique el cliente que busca dar de baja:</p>

								<h:panelGrid columns="3"> -->
									<h:outputText value="Identificador del cliente: " styleClass="info-campo"/>
									<h:inputText id="identBaja" required="true" requiredMessage="Valor obligatorio" value="#{admin.ident}"/>
									<h:message for="identBaja" styleClass="info-campo"/>
								</h:panelGrid>
									
								<div style="display: inline">
									<h:commandButton styleClass="button" id="darBaja" value="Dar de Baja" action="#{admin.darBaja()}"/>
									<button onclick="cerrar('Baja');return false">Cancelar</button>
								</div>
								
							</h:form>

						</div>

					</div>
					
					<div>

						<h2>Administrar cuentas</h2>

						<button onclick="mostrar('AA')">Aperturar Cuenta Agrupada</button>

						<button onclick="mostrar('AS')">Aperturar Cuenta Segregada</button>

						<button onclick="mostrar('Cer')">Cerrar Cuenta</button>

						<div class="AA" style="display:none">

							<h:form id="fAA">

								<p>Introduzca los datos:</p>

								<h:panelGrid columns="3">
									<h:outputText value="IBAN de la cuenta: " styleClass="info-campo"/>
									<h:inputText id="ibanAA" required="true" requiredMessage="Valor obligatorio" value="#{admin.iban}"/>
									<h:message for="ibanAA" styleClass="info-campo"/>
			
									<h:outputText value="Identificador del cliente: " styleClass="info-campo"/>
									<h:inputText id="identAA" required="true" requiredMessage="Valor obligatorio" value="#{admin.ident}"/>
									<h:message for="identAA" styleClass="info-campo"/>
								</h:panelGrid>
								
								<div style="display: inline">
									<h:commandButton styleClass="button" id="AA" value="Apeturar" action="#{admin.aperturaCuentaAgrup()}"/>
									<button onclick="cerrar('AA');return false">Cancelar</button>
								</div>

							</h:form>

						</div>	
													
						<div class="AS" style="display:none">
							<h:form id="fAS">

								<p>Introduzca los datos necesarios para la apertura:</p>

								<h:panelGrid columns="3">
									<h:outputText value="IBAN de la cuenta: " styleClass="info-campo"/>
									<h:inputText id="ibanAS" required="true" requiredMessage="Valor obligatorio" value="#{admin.iban}"/>
									<h:message for="ibanAS" styleClass="info-campo"/>
									
									<h:outputText value="Identificador del cliente: " styleClass="info-campo"/>
									<h:inputText id="identAS" required="true" requiredMessage="Valor obligatorio" value="#{admin.ident}"/>
									<h:message for="identAS" styleClass="info-campo"/>
									
									<h:outputText value="IBAN de la Cuenta Referencia: " styleClass="info-campo"/>
									<h:inputText id="ibanRef" required="true" requiredMessage="Valor obligatorio" value="#{admin.ibanRef}"/>
									<h:message for="ibanRef" styleClass="info-campo"/>
								</h:panelGrid>
								
								<h:commandButton styleClass="button" id="aperturaSegreg" value="Aperturar" action="#{admin.aperturaCuentaSegreg()}"/>
								<button onclick="cerrar('AS');return false">Cancelar</button>

							</h:form>
						</div>

						<div class="Cer" style="display:none">
							
							<h:form id="fCer">

								<p>Indique la cuenta que quiere cerrar: </p>

								<h:panelGrid columns="3">
									<h:outputText value="IBAN de la cuenta: " styleClass="info-campo"/>
									<h:inputText id="ibanCer" required="true" requiredMessage="Valor obligatorio" value="#{admin.iban}"/>
									<h:message for="ibanCer" styleClass="info-campo"/>
								</h:panelGrid>
								
								<div style="display: inline">
									<h:commandButton styleClass="button" id="cerra" value="Cerrar" action="#{admin.cerrarCuenta()}"/>
									<button onclick="cerrar('Cer');return false">Cancelar</button>
								</div>

							</h:form>

						</div>
					

					</div>
					
					<div>

						<h2>Administrar autorizaciones</h2>

						<button onclick="mostrar('APA')">Añadir Persona Autorizada</button>
						
						<button onclick="mostrar('MPA')">Modificar Persona Autorizada</button>

						<button onclick="mostrar('EPA')">Eliminar Persona Autorizada</button>

						<div class="APA" style="display:none">

							<h:form id="fAPA">

								<p>Indique la persona autorizada a añadir a la empresa:</p>
								
								<h:panelGrid columns="3">
									<h:outputText value="Identificador de la empresa: " styleClass="info-campo"/>
									<h:inputText id="idEmpAPA" required="true" requiredMessage="Valor obligatorio" value="#{admin.idEmp}"/>
									<h:message for="idEmpAPA" styleClass="info-campo"/>
									
									<h:outputText value="Identificador de la persona a autorizar: " styleClass="info-campo"/>
									<h:inputText id="idPerAPA" required="true" requiredMessage="Valor obligatorio" value="#{admin.idPer}"/>
									<h:message for="idPerAPA" styleClass="info-campo"/>
									
									<h:outputText value="Tipo de autorizacion: " styleClass="info-campo"/>
									<h:inputText id="tipoAPA" required="true" requiredMessage="Valor obligatorio" value="#{admin.tipo}"/>
									<h:message for="tipoAPA" styleClass="info-campo"/>
								</h:panelGrid>
								
								<div style="display: inline">
									<h:commandButton styleClass="button" id="addAutor" value="Añadir" action="#{admin.addAutorizado()}"/>
									<button onclick="cerrar('APA');return false">Cancelar</button>
								</div>

							</h:form>

						</div>
												
						<div class="MPA" style="display:none">

							<p>Indique la persona autorizada a modificar:</p>	
							<h:panelGrid columns="3"> 
								<h:outputText value="Identificador de la Persona Autorizada: " styleClass="info-campo"/>
								<h:inputText id="identModPer" required="true" requiredMessage="Valor obligatorio" value="#{admin.idPer}"/>
								<h:message for="identModPer" styleClass="info-campo"/>

								<h:outputText value="Nueva fecha de baja: " styleClass="info-campo"/>
								<h:inputText id="fechaFinModPer" value="#{admin.fechaFin}"/>
								<h:message for="fechaFinModPer" styleClass="info-campo"/>

								<h:outputText value="Nuevo estado: " styleClass="info-campo"/>
								<h:inputText id="estadoPAModPer" value="#{admin.estadoPA}"/>
								<h:message for="estadoPAModPer" styleClass="info-campo"/>

								<h:outputText value="Nueva direccion: " styleClass="info-campo"/>
								<h:inputText id="dir2ModPer" value="#{admin.dir2}"/>
								<h:message for="dir2ModPer" styleClass="info-campo"/>
							</h:panelGrid>
							<div style="display: inline">
								<h:commandButton styleClass="button" id="modificarAutor" value="Modificar" action="#{admin.modificarAutorizado()}"/>
								<button onclick="cerrar('MPA');return false">Cancelar</button>
							</div>

						</div>
												
						<div class="EPA" style="display:none">

							<h:form id="fEPA">

								<p>Indique la persona autorizada a eliminar:</p>
								
								<h:panelGrid columns="3">
									<h:outputText value="Identificador de la empresa: " styleClass="info-campo"/>
									<h:inputText id="idEmpE" required="true" requiredMessage="Valor obligatorio" value="#{admin.idEmp}"/>
									<h:message for="idEmpE" styleClass="info-campo"/>
									
									<h:outputText value="Identificador de la persona a autorizar: " styleClass="info-campo"/>
									<h:inputText id="idPerE" required="true" requiredMessage="Valor obligatorio" value="#{admin.idPer}"/>
									<h:message for="idPerE" styleClass="info-campo"/>
								</h:panelGrid>
								
								<div style="display: inline">
									<h:commandButton styleClass="button" id="eliminarAutor" value="Eliminar" action="#{admin.eliminarAutorizado()}"/>
									<button onclick="cerrar('EPA');return false">Cancelar</button>
								</div>

							</h:form>

							</div>
						</div>
						
						
						<div>

						<h2>Generar Informes regulatorios</h2>

						<button onclick="mostrar('HOLANDA')">Paises Bajos</button>
						
						<button onclick="mostrar('ALEMANIA')">Alemania</button>

						<div class="ALEMANIA" style="display:none">
							
    					<h:form id="fALEMANIA">
       						<h:commandButton styleClass="button" id="aSem" value="Semanal" action="#{infal.descargaSemanal()}"/>
							<h:commandButton styleClass="button" id="aMen" value="Mensual" action="#{infal.descargaMensual()}"/>
							<button onclick="cerrar('ALEMANIA');return false">Cancelar</button>
						</h:form>

						</div>
						
						</div>	
						
					</c:when>
					
					<c:otherwise>
						<p>NO TIENE PERMISO DE ENTRAR AQUÍ >:(((</p>
					</c:otherwise>
					
				</c:choose>
							
			</div>			

					<script type="text/javascript"> 
					const mostrar = elementByClass => {
						document.querySelector('.' + elementByClass).toggleAttribute('style');
					};
					
					const cerrar = elementByClass => {
						document.querySelector('.' + elementByClass).setAttribute('style',"display:none");
					};
					
    				function start() {
        				PF('statusDialog').show();
    				}

    				function stop() {
        				PF('statusDialog').hide();
    				}
    				</script>
		</section>
	</h:body>

</html>
